{% extends "RigauxtForumBundle::layout.html.twig" %}

{% block title %}{{ parent() }} - {% if topic.type == "Classique" %}Discussion{% else %}Post-It{% endif %} - {{ topic.title }}{% endblock %}

{% block rigauxtforum_body %}
	<div class="row">
		<div class="col-md-12">
			<h2>{% if topic.type.name == "Classique" %}Discussion{% else %}Post-It{% endif %}</h2>
			
			<div class="well" style="padding: 10px">
				<span class="glyphicon glyphicon-tower"></span>
				{% for nom, lien in ariane %}
					 {% if loop.first == false %}/{% endif %} {% if loop.last == false %}<a href="{{ lien }}">{% else %}<em>{% endif %}{{ nom }}{% if loop.last == false %}</a>{% else %}</em>{% endif %}
				{% endfor %}
			</div>
			
			<hr>
			
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th style="width: 150px">
							Author
						</th>
						<th>
							{{ topic.title }}
						</th>
					</tr>
				</thead>
				<tbody>
					{% for id, post in topic.posts %}
						<tr>
							<td>
								<a class="removeLink" href="{{ path('rigauxt_user_profile', {'username': post.author.username}) }}">
									{{ format_avatar(post.author, 32) }}
									{% if post.author.nom != null or post.author.prenom != null %}
										{{ post.author.prenom }}
										{% if post.author.prenom != null %}
										{% endif %}
										{{ post.author.nom }}
									{% else %}
										{{ post.author.username }}
									{% endif %}
								</a>
							</td>
							<td style="text-align: justify">
								{{ post.message|nl2br }}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			
			{% if app.user != null %}
				{{ render(controller("RigauxtForumBundle:Topic:newPost", {'slug': topic.slug})) }}
			{% endif %}
		</div>
	</div>
{% endblock %}
